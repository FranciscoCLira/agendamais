<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Atividade</title>
    <link rel="stylesheet" th:href="@{/css/estilo.css}" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css"
    />
  </head>

  <body>
    <div th:replace="fragments/layout_cabecalho :: cabecalho"></div>
    <div
      class="d-flex justify-content-center align-items-center"
      style="min-height: 90vh; background: #f8f9fa"
    >
      <div class="card shadow" style="width: 100%; max-width: 650px">
        <div class="card-header">
          <h4
            class="mb-0"
            th:text="${atividade.id} != null ? 'EDITAR ATIVIDADE:' : 'NOVA ATIVIDADE:'"
          >
            NOVA ATIVIDADE:
          </h4>
        </div>
        <div class="card-body">
          <form
            th:action="@{/atividades/salvar}"
            th:object="${atividade}"
            method="post"
            onsubmit="preencherIdSolicitante()"
          >
            <input type="hidden" th:field="*{id}" />
            <div class="mb-3">
              <label for="tituloAtividade" class="form-label"
                >Título da Atividade *</label
              >
              <input
                type="text"
                id="tituloAtividade"
                th:field="*{tituloAtividade}"
                maxlength="40"
                required
                class="form-control"
              />
            </div>
            <div class="mb-3">
              <label for="tipoAtividade" class="form-label"
                >Tipo de Atividade *</label
              >
              <select
                id="tipoAtividade"
                th:field="*{tipoAtividade}"
                required
                class="form-select"
              >
                <option
                  value=""
                  th:selected="${atividade.tipoAtividade == null}"
                >
                  Escolher...
                </option>
                <option
                  th:each="tipo : ${tiposAtividade}"
                  th:value="${tipo.id}"
                  th:text="${tipo.tituloTipoAtividade}"
                  th:selected="${atividade.tipoAtividade != null and tipo.id == atividade.tipoAtividade.id}"
                ></option>
              </select>
            </div>
            <div class="mb-3">
              <label for="subInstituicao" class="form-label"
                >Subinstituição *</label
              >
              <select
                id="subInstituicao"
                th:field="*{subInstituicao}"
                required
                class="form-select"
              >
                <option
                  value=""
                  th:selected="${atividade.subInstituicao == null}"
                >
                  Escolher...
                </option>
                <option
                  th:each="sub : ${subinstituicoes}"
                  th:value="${sub.id}"
                  th:text="${sub.nomeSubInstituicao}"
                  th:selected="${atividade.subInstituicao != null and sub.id == atividade.subInstituicao.id}"
                ></option>
              </select>
            </div>
            <div class="mb-3">
              <div
                th:replace="fragments/autocomplete-solicitante :: autocompleteSolicitante(solicitante=${atividade.idSolicitante})"
              ></div>
            </div>
            <div class="mb-3">
              <label for="situacaoAtividade" class="form-label"
                >Situação *</label
              >
              <select
                id="situacaoAtividade"
                th:field="*{situacaoAtividade}"
                required
                class="form-select"
              >
                <option
                  value=""
                  th:selected="${atividade.situacaoAtividade == null}"
                >
                  Escolher...
                </option>
                <option
                  value="P"
                  th:selected="${atividade.situacaoAtividade == 'P'}"
                >
                  Proposta
                </option>
                <option
                  value="A"
                  th:selected="${atividade.situacaoAtividade == 'A'}"
                >
                  Aprovada
                </option>
                <option
                  value="R"
                  th:selected="${atividade.situacaoAtividade == 'R'}"
                >
                  Rejeitada
                </option>
                <option
                  value="C"
                  th:selected="${atividade.situacaoAtividade == 'C'}"
                >
                  Cancelada
                </option>
                <option
                  value="F"
                  th:selected="${atividade.situacaoAtividade == 'F'}"
                >
                  Finalizada
                </option>
              </select>
            </div>
            <div class="mb-3">
              <label for="formaApresentacao" class="form-label"
                >Forma Apresentação *</label
              >
              <select
                id="formaApresentacao"
                th:field="*{formaApresentacao}"
                required
                class="form-select"
              >
                <option
                  value=""
                  th:selected="${atividade.formaApresentacao == null}"
                >
                  Escolher...
                </option>
                <option
                  value="1"
                  th:selected="${atividade.formaApresentacao == 1}"
                >
                  Presencial
                </option>
                <option
                  value="2"
                  th:selected="${atividade.formaApresentacao == 2}"
                >
                  Online
                </option>
                <option
                  value="3"
                  th:selected="${atividade.formaApresentacao == 3}"
                >
                  Híbrido
                </option>
                <option
                  value="4"
                  th:selected="${atividade.formaApresentacao == 4}"
                >
                  Outro
                </option>
              </select>
            </div>
            <div class="mb-3">
              <label for="publicoAlvo" class="form-label">Público Alvo *</label>
              <select
                id="publicoAlvo"
                th:field="*{publicoAlvo}"
                required
                class="form-select"
              >
                <option value="" th:selected="${atividade.publicoAlvo == null}">
                  Escolher...
                </option>
                <option value="1" th:selected="${atividade.publicoAlvo == 1}">
                  Público
                </option>
                <option value="2" th:selected="${atividade.publicoAlvo == 2}">
                  Restrito
                </option>
                <option value="3" th:selected="${atividade.publicoAlvo == 3}">
                  Acadêmico
                </option>
                <option value="4" th:selected="${atividade.publicoAlvo == 4}">
                  Outro
                </option>
              </select>
            </div>
            <div class="mb-3">
              <label for="descricaoAtividade" class="form-label"
                >Descrição</label
              >
              <textarea
                id="descricaoAtividade"
                th:field="*{descricaoAtividade}"
                rows="4"
                class="form-control"
                maxlength="255"
              ></textarea>
            </div>
            <div class="mb-3">
              <label for="comentariosAtividade" class="form-label"
                >Comentários</label
              >
              <textarea
                id="comentariosAtividade"
                th:field="*{comentariosAtividade}"
                rows="2"
                class="form-control"
                maxlength="255"
              ></textarea>
            </div>
            <div class="mb-3">
              <label for="linkMaterialAtividade" class="form-label"
                >Link para Material</label
              >
              <input
                type="url"
                id="linkMaterialAtividade"
                th:field="*{linkMaterialAtividade}"
                class="form-control"
              />
            </div>
            <div class="mb-3">
              <label for="linkAtividadeOnLine" class="form-label"
                >Link Atividade Online</label
              >
              <input
                type="url"
                id="linkAtividadeOnLine"
                th:field="*{linkAtividadeOnLine}"
                class="form-control"
              />
            </div>
            <div class="d-flex justify-content-end gap-2 mt-4">
              <button type="submit" class="btn btn-primary">Salvar</button>
              <a
                th:href="@{/administrador/atividades}"
                class="btn btn-secondary"
                >Cancelar</a
              >
            </div>
            <div
              th:if="${erroSolicitante != null}"
              class="alert alert-danger mt-3"
              th:text="${erroSolicitante}"
            ></div>
          </form>
        </div>
      </div>
    </div>
    <script src="/js/autocomplete-solicitante.js"></script>
  </body>
</html>
