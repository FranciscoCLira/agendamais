# Production-like local profile using Docker Postgres
# Activate with: --spring.profiles.active=prod-docker

# Server port (prod uses 8080, dev uses 8081)
server.port=8080

# Postgres datasource (container exposed on host:5432)
spring.datasource.url=jdbc:postgresql://localhost:5432/agendadb_prod
spring.datasource.username=agenda
spring.datasource.password=agenda
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate settings
# For local prod-docker, use 'update' to create tables after Flyway migrations  
# In real production, you would use 'validate' and manage schema entirely via migrations
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true

# Flyway: run normally against this DB; do NOT enable baseline-on-migrate in prod
spring.flyway.enabled=true

# Mail settings (local dev)
spring.mail.host=localhost
spring.mail.port=3025
spring.mail.username=dummy
spring.mail.password=dummy

# keep H2 console disabled in prod-like profile
spring.h2.console.enabled=false

# Session timeout - 30 minutes (Spring Boot default)
server.servlet.session.timeout=30m

# Unique session cookie name to avoid conflicts with dev on same localhost
server.servlet.session.cookie.name=JSESSIONID_PROD

# Use institution SMTP settings from database instead of global spring.mail properties
app.mail.useInstitutionSmtp=true

# Application URL for email links and redirects
app.url=http://localhost:8081

# Convenience
# Set to true for initial setup to create sample users
# In real production, this should be false and users managed via admin UI
app.reload-data=false
